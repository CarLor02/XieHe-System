# 医疗影像诊断系统 - Docker 环境变量配置
# 请根据实际环境修改这些值

# ===========================================
# 基础配置
# ===========================================
COMPOSE_PROJECT_NAME=medical_system
COMPOSE_FILE=docker-compose.yml
ENVIRONMENT=development

# ===========================================
# 数据库配置
# ===========================================
# MySQL 配置
MYSQL_ROOT_PASSWORD=root_password_2024_secure
MYSQL_DATABASE=medical_system
MYSQL_USER=medical_user
MYSQL_PASSWORD=medical_password_2024_secure

# Redis 配置
REDIS_PASSWORD=redis_password_2024_secure

# ===========================================
# 应用配置
# ===========================================
# JWT 密钥
JWT_SECRET_KEY=jwt_secret_key_2024_very_secure_random_string

# API 配置
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4

# 前端配置
NEXT_PUBLIC_API_URL=https://api.medical-system.com
NEXT_PUBLIC_WS_URL=wss://api.medical-system.com
NEXT_PUBLIC_APP_NAME=医疗影像诊断系统

# ===========================================
# 安全配置
# ===========================================
# CORS 配置
CORS_ORIGINS=https://medical-system.com,https://www.medical-system.com

# SSL 配置
SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
SSL_KEY_PATH=/etc/nginx/ssl/key.pem

# ===========================================
# 第三方服务配置
# ===========================================
# 邮件服务配置
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM=noreply@medical-system.com

# 对象存储配置 (AWS S3 / 阿里云 OSS)
STORAGE_TYPE=local
AWS_ACCESS_KEY_ID=your-access-key
AWS_SECRET_ACCESS_KEY=your-secret-key
AWS_BUCKET_NAME=medical-system-uploads
AWS_REGION=us-west-2

# 阿里云 OSS 配置
ALIYUN_ACCESS_KEY_ID=your-access-key
ALIYUN_ACCESS_KEY_SECRET=your-secret-key
ALIYUN_BUCKET_NAME=medical-system-uploads
ALIYUN_ENDPOINT=oss-cn-beijing.aliyuncs.com

# ===========================================
# 监控和日志配置
# ===========================================
# Sentry 错误监控
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Grafana 配置
GRAFANA_PASSWORD=grafana_admin_password_2024

# Prometheus 配置
PROMETHEUS_RETENTION_TIME=30d

# ===========================================
# AI 模型配置
# ===========================================
# AI 服务配置
AI_SERVICE_ENABLED=false
AI_MODEL_PATH=/app/models
AI_GPU_ENABLED=false

# TensorFlow 配置
TF_CPP_MIN_LOG_LEVEL=2
CUDA_VISIBLE_DEVICES=0

# ===========================================
# 备份配置
# ===========================================
# 数据库备份
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=medical-system-backups

# ===========================================
# 性能配置
# ===========================================
# 数据库连接池
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30

# Redis 连接池
REDIS_POOL_SIZE=20
REDIS_MAX_CONNECTIONS=50

# 文件上传限制
MAX_UPLOAD_SIZE=100M
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,pdf,dcm,dicom

# ===========================================
# 开发环境特定配置
# ===========================================
# 调试模式
DEBUG=true
LOG_LEVEL=DEBUG

# 热重载
HOT_RELOAD=true
WATCH_FILES=true

# ===========================================
# 生产环境特定配置
# ===========================================
# 当 ENVIRONMENT=production 时使用以下配置

# 安全配置
SECURE_SSL_REDIRECT=true
SECURE_HSTS_SECONDS=31536000
SECURE_CONTENT_TYPE_NOSNIFF=true
SECURE_BROWSER_XSS_FILTER=true

# 缓存配置
CACHE_TTL=3600
STATIC_FILES_CACHE=31536000

# 限流配置
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60

# ===========================================
# 健康检查配置
# ===========================================
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3

# ===========================================
# 网络配置
# ===========================================
# Docker 网络
NETWORK_SUBNET=172.20.0.0/16
MONITORING_SUBNET=172.21.0.0/16

# 端口配置
HTTP_PORT=80
HTTPS_PORT=443
MYSQL_PORT=3306
REDIS_PORT=6379
PROMETHEUS_PORT=9090
GRAFANA_PORT=3001

# ===========================================
# 资源限制配置
# ===========================================
# 内存限制
FRONTEND_MEMORY_LIMIT=512m
BACKEND_MEMORY_LIMIT=2g
MYSQL_MEMORY_LIMIT=2g
REDIS_MEMORY_LIMIT=512m
NGINX_MEMORY_LIMIT=256m

# CPU 限制
FRONTEND_CPU_LIMIT=0.5
BACKEND_CPU_LIMIT=1.0
MYSQL_CPU_LIMIT=1.0
REDIS_CPU_LIMIT=0.5
NGINX_CPU_LIMIT=0.5

# ===========================================
# 时区配置
# ===========================================
TZ=Asia/Shanghai
MYSQL_TZ=Asia/Shanghai

# ===========================================
# 日志配置
# ===========================================
LOG_FORMAT=json
LOG_ROTATION=daily
LOG_MAX_SIZE=100M
LOG_MAX_FILES=30

# ===========================================
# 特性开关
# ===========================================
FEATURE_AI_DIAGNOSIS=true
FEATURE_REAL_TIME_NOTIFICATION=true
FEATURE_ADVANCED_ANALYTICS=true
FEATURE_MOBILE_APP=false
FEATURE_TELEMEDICINE=false

# ===========================================
# 许可证配置
# ===========================================
LICENSE_KEY=your-license-key-here
LICENSE_EXPIRY=2025-12-31

# ===========================================
# 注意事项
# ===========================================
# 1. 生产环境请务必修改所有默认密码
# 2. 定期轮换密钥和密码
# 3. 使用强密码和复杂的密钥
# 4. 不要将此文件提交到版本控制系统
# 5. 使用 Docker Secrets 或 Kubernetes Secrets 管理敏感信息
