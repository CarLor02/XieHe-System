# 管理员手册

## 概述

本手册面向XieHe医疗影像诊断系统的系统管理员，提供系统管理、用户管理、数据维护等操作指南。

## 系统管理

### 用户管理

#### 创建用户账号

1. 登录管理员账号
2. 进入"用户管理"页面
3. 点击"新增用户"按钮
4. 填写用户信息：
   - 用户名（唯一标识）
   - 密码（符合安全策略）
   - 姓名
   - 邮箱
   - 电话
   - 角色（医生/护士/管理员）
   - 科室
5. 设置用户权限
6. 点击"创建"按钮

#### 用户权限管理

**角色权限说明:**

| 角色 | 患者管理 | 影像管理 | AI诊断 | 报告管理 | 用户管理 | 系统设置 |
|------|----------|----------|--------|----------|----------|----------|
| 管理员 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| 医生 | ✅ | ✅ | ✅ | ✅ | ❌ | ❌ |
| 护士 | ✅ | ✅ | ❌ | 👁️ | ❌ | ❌ |

**权限设置步骤:**
1. 选择目标用户
2. 点击"编辑权限"
3. 勾选相应的功能权限
4. 设置数据访问范围（全院/科室/个人）
5. 保存权限设置

#### 用户状态管理

**激活/停用用户:**
1. 在用户列表中找到目标用户
2. 点击状态切换按钮
3. 确认操作

**重置用户密码:**
1. 选择用户，点击"重置密码"
2. 系统生成临时密码
3. 通知用户首次登录时修改密码

### 系统配置

#### 基础配置

**系统信息设置:**
- 系统名称和版本
- 机构信息
- 联系方式
- Logo上传

**安全策略配置:**
- 密码复杂度要求
- 登录失败锁定策略
- 会话超时时间
- IP访问限制

#### 邮件服务配置

1. 进入"系统设置" > "邮件配置"
2. 配置SMTP服务器：
   - 服务器地址
   - 端口号
   - 加密方式（SSL/TLS）
   - 认证信息
3. 测试邮件发送
4. 保存配置

#### 存储配置

**文件存储设置:**
- 本地存储路径
- 云存储配置（可选）
- 存储容量限制
- 文件保留策略

**数据库配置:**
- 连接池大小
- 查询超时时间
- 备份策略
- 索引优化

### 数据管理

#### 数据备份

**自动备份设置:**
1. 进入"数据管理" > "备份设置"
2. 配置备份策略：
   - 备份频率（每日/每周）
   - 备份时间
   - 保留天数
   - 备份存储位置
3. 启用自动备份

**手动备份:**
1. 点击"立即备份"按钮
2. 选择备份内容：
   - 数据库
   - 用户上传文件
   - 系统配置
3. 等待备份完成
4. 下载备份文件

#### 数据恢复

**从备份恢复:**
1. 选择备份文件
2. 确认恢复范围
3. 执行恢复操作
4. 验证数据完整性

**注意事项:**
- 恢复前请停止系统服务
- 建议在维护时间窗口执行
- 恢复后需要重启系统

#### 数据清理

**定期清理任务:**
- 临时文件清理
- 日志文件轮转
- 过期数据归档
- 缓存清理

**手动清理:**
1. 进入"数据管理" > "数据清理"
2. 选择清理类型
3. 设置清理条件
4. 执行清理操作

## 系统监控

### 性能监控

#### 系统资源监控

**监控指标:**
- CPU使用率
- 内存使用率
- 磁盘使用率
- 网络流量
- 数据库连接数

**查看方式:**
1. 进入"系统监控"页面
2. 选择时间范围
3. 查看实时图表
4. 设置告警阈值

#### 应用性能监控

**关键指标:**
- API响应时间
- 请求成功率
- 并发用户数
- 影像处理时间
- AI分析耗时

**性能优化建议:**
- 定期清理缓存
- 优化数据库查询
- 调整服务器配置
- 升级硬件资源

### 日志管理

#### 日志类型

**系统日志:**
- 应用程序日志
- 错误日志
- 访问日志
- 安全日志

**业务日志:**
- 用户操作日志
- 数据变更日志
- AI分析日志
- 报告生成日志

#### 日志查看

1. 进入"日志管理"页面
2. 选择日志类型
3. 设置过滤条件：
   - 时间范围
   - 用户
   - 操作类型
   - 日志级别
4. 查看日志详情
5. 导出日志文件

#### 日志分析

**异常检测:**
- 错误频率统计
- 异常模式识别
- 性能瓶颈分析
- 安全威胁检测

**报表生成:**
- 用户活跃度报告
- 系统使用统计
- 错误趋势分析
- 性能评估报告

## 安全管理

### 访问控制

#### IP白名单

1. 进入"安全设置" > "IP访问控制"
2. 添加允许访问的IP地址或网段
3. 设置访问规则
4. 启用IP白名单功能

#### 登录安全

**多因素认证:**
- 短信验证码
- 邮箱验证码
- Google Authenticator
- 硬件令牌

**登录监控:**
- 异常登录检测
- 多地登录告警
- 暴力破解防护
- 登录日志审计

### 数据安全

#### 数据加密

**传输加密:**
- HTTPS协议
- SSL证书配置
- 数据传输加密

**存储加密:**
- 数据库加密
- 文件系统加密
- 备份文件加密

#### 隐私保护

**数据脱敏:**
- 患者信息脱敏
- 日志数据脱敏
- 测试数据脱敏

**访问审计:**
- 数据访问记录
- 敏感操作审计
- 权限变更记录

## 故障处理

### 常见问题

#### 系统无法访问

**排查步骤:**
1. 检查服务器状态
2. 验证网络连接
3. 查看应用程序日志
4. 检查数据库连接
5. 重启相关服务

#### 性能问题

**诊断方法:**
1. 查看系统资源使用情况
2. 分析慢查询日志
3. 检查缓存命中率
4. 监控网络延迟
5. 优化数据库索引

#### 数据问题

**处理流程:**
1. 确认问题范围
2. 停止相关操作
3. 备份当前数据
4. 执行数据修复
5. 验证修复结果

### 应急响应

#### 故障响应流程

1. **故障发现**
   - 监控告警
   - 用户反馈
   - 主动巡检

2. **初步评估**
   - 影响范围
   - 严重程度
   - 预计恢复时间

3. **应急处理**
   - 启动应急预案
   - 通知相关人员
   - 执行恢复操作

4. **问题解决**
   - 根因分析
   - 永久修复
   - 预防措施

#### 联系方式

**技术支持:**
- 24小时热线: 400-123-4567
- 紧急邮箱: emergency@xiehe-medical.com
- 技术QQ群: 123456789

**升级路径:**
1. 一线技术支持
2. 高级工程师
3. 系统架构师
4. 技术总监

## 维护计划

### 定期维护

#### 日常维护（每日）

- [ ] 检查系统运行状态
- [ ] 查看监控告警
- [ ] 备份重要数据
- [ ] 清理临时文件
- [ ] 检查磁盘空间

#### 周维护（每周）

- [ ] 系统性能分析
- [ ] 日志文件轮转
- [ ] 数据库优化
- [ ] 安全扫描
- [ ] 用户反馈处理

#### 月维护（每月）

- [ ] 系统更新检查
- [ ] 安全补丁安装
- [ ] 数据归档
- [ ] 性能调优
- [ ] 灾备演练

### 升级计划

#### 版本升级

**升级前准备:**
1. 备份系统数据
2. 测试环境验证
3. 制定回滚计划
4. 通知用户维护时间

**升级步骤:**
1. 停止应用服务
2. 备份当前版本
3. 部署新版本
4. 数据库迁移
5. 功能验证测试
6. 启动服务

**升级后验证:**
- 功能完整性测试
- 性能基准测试
- 用户接受度测试
- 监控指标验证

## 最佳实践

### 安全最佳实践

1. **定期更新密码策略**
2. **启用多因素认证**
3. **定期安全审计**
4. **及时安装安全补丁**
5. **监控异常访问**

### 性能最佳实践

1. **定期清理缓存**
2. **优化数据库查询**
3. **监控系统资源**
4. **合理配置负载均衡**
5. **定期性能测试**

### 数据管理最佳实践

1. **制定备份策略**
2. **定期验证备份**
3. **实施数据归档**
4. **监控数据质量**
5. **建立恢复流程**

## 附录

### 配置文件说明

**主配置文件位置:**
- 应用配置: `/app/config/settings.py`
- 数据库配置: `/app/config/database.py`
- 缓存配置: `/app/config/cache.py`

### 常用命令

**服务管理:**
```bash
# 启动服务
docker-compose up -d

# 停止服务
docker-compose down

# 重启服务
docker-compose restart

# 查看日志
docker-compose logs -f
```

**数据库操作:**
```bash
# 备份数据库
pg_dump -h localhost -U postgres xiehe_medical > backup.sql

# 恢复数据库
psql -h localhost -U postgres xiehe_medical < backup.sql
```

### 联系信息

**开发团队:**
- 项目经理: manager@xiehe-medical.com
- 技术负责人: tech-lead@xiehe-medical.com
- 运维负责人: ops@xiehe-medical.com
